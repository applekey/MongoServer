{"ts":1352954199014,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var DataProvider = require('../MongoProvider').DataProvider;\nvar MinSchemaValidator = require('../MinimumSchemaValidator').MinimumSchemaValidator;\n\nvar MinLoginInformation = {\n    UserName: 'Username',\n    Password: 'Password'\n};\n\nvar collectionId = 'Mongo_Users';\n\nPersonService = function() {\n    this.DataProvider = new DataProvider('alex.mongohq.com', 10041); \n}   \n\nPersonService.prototype.CreateLogin = function(loginInformation, callback) {\n\n    var thatDbProvider = this.DataProvider;\n\n    ValidateLoginInformation(loginInformation, function(error) {\n        if (error) {\n            callback(error);\n            return;\n        }\n        thatDbProvider.save(collectionId, loginInformation, function(error) {\n\n            if (error) {\n                callback(error);\n            }\n            else {\n                callback(null);\n            }\n        });\n    });\n}\n\n\nPersonService.prototype.Login = function(loginInformation, callback) {\n    var thatDbProvider= this.DataProvider;\n\n    ValidateLoginInformation(loginInformation, function(error) {\n        if (error) {\n            callback(error);\n            return;\n        }\n\n       \n        var findArgs = {UserName:loginInformation.UserName};\n\n        thatDbProvider.find(collectionId, findArgs, function(error, account) {\n            if (error) {\n                callback(error);\n            }\n            else {\n                callback(null, account);\n            }\n        });\n    });\n}\n// PRIVATE METHODS\n\nvar ValidateLoginInformation = function(loginInformation,callback)\n{\n    var SchemaValidator = new MinSchemaValidator(MinLoginInformation);\n    SchemaValidator.Validate(loginInformation, function(error) {\n        if (error) {\n            callback(error);\n            return;\n        }\n\n        if (isEmpty(loginInformation.UserName)) {\n            callback('login information is null or empty');\n            return;\n        }\n        \n        if (isEmpty(loginInformation.Password)) {\n            callback('password information is null or empty');\n            return;\n        }\n        callback(null);\n    });\n\n}\n\nfunction isEmpty(str) {\n    return (!str || 0 === str.length);\n}\n\nexports.PersonService = PersonService;"]],"start1":0,"start2":0,"length1":0,"length2":2195}]],"length":2195}
{"contributors":[],"silentsave":false,"ts":1353035980981,"patch":[[{"diffs":[[0,"lidator;"],[1,"\nvar HotLinkService = require('./HotLinkService').HotlinkService;\nvar DocumentService = require('./DocumentService').DocumentService;"],[0,"\n\nvar Mi"]],"start1":138,"start2":138,"length1":16,"length2":149},{"diffs":[[0," 10041);"],[-1," "],[1,"\n    this.SchemaValidator = new MinSchemaValidator(MinLoginInformation);\n    this.DocumentService = new DocumentService();\n    this.HotlinkService = new HotLinkService(this.DocumentService);"],[0,"\n}   \n\nP"]],"start1":488,"start2":488,"length1":17,"length2":206},{"diffs":[[0,"s.DataProvider;\n"],[-1,"\n"],[0,"    "],[1,"var hotLinkService = this.HotlinkService;\n\n    this."],[0,"ValidateLoginInf"]],"start1":799,"start2":799,"length1":37,"length2":88},{"diffs":[[0,"r;\n\n    "],[-1,""],[0,""],[1,"this."],[0,"Validate"]],"start1":1363,"start2":1363,"length1":16,"length2":21},{"diffs":[[0,"         else {\n"],[1,"                hotLinkService.ConstructDocumentLinks(account, function(error, linkurls) {\n                    \n                    if(error){callback(error);}\n                    else {callback(null,linkurls);}\n\n\n                });\n"],[0,"                "]],"start1":1742,"start2":1742,"length1":32,"length2":266},{"diffs":[[0,"ETHODS\n\n"],[-1,"var "],[0,"Validate"]],"start1":2081,"start2":2081,"length1":20,"length2":16},{"diffs":[[0,"    "],[-1,"var SchemaValidator = new MinSchemaValidator(MinLoginInformation);\n    "],[1,"this."],[0,"Sche"]],"start1":2154,"start2":2154,"length1":79,"length2":13}]],"length":2737,"saved":false}
{"ts":1353035984554,"patch":[[{"diffs":[[0,"});\n"],[-1,"                callback(null, account);\n"],[0,"    "]],"start1":1988,"start2":1988,"length1":49,"length2":8}]],"length":2696,"saved":false}
{"ts":1353035988253,"patch":[[{"diffs":[[0,"linkurls) {\n"],[1,"\n"],[0,"            "]],"start1":1837,"start2":1837,"length1":24,"length2":25},{"diffs":[[0,"                "],[1,"if (error) {"],[0,"\n               "]],"start1":1854,"start2":1854,"length1":32,"length2":44},{"diffs":[[0,"    "],[-1,"if(error){"],[1,"    "],[0,"call"]],"start1":1899,"start2":1899,"length1":18,"length2":12},{"diffs":[[0,"(error);"],[1,"\n                    "],[0,"}\n      "]],"start1":1915,"start2":1915,"length1":16,"length2":37},{"diffs":[[0,"  else {"],[1,"\n                        "],[0,"callback"]],"start1":1964,"start2":1964,"length1":16,"length2":41},{"diffs":[[0,"ck(null,"],[1," "],[0,"linkurls"]],"start1":2003,"start2":2003,"length1":16,"length2":17},{"diffs":[[0,"nkurls);"],[1,"\n                    "],[0,"}\n\n\n    "]],"start1":2014,"start2":2014,"length1":16,"length2":37},{"diffs":[[0,";\n            }\n"],[1,"    "],[0,"        });\n    "]],"start1":2065,"start2":2065,"length1":32,"length2":36}]],"length":2775,"saved":false}
{"ts":1353035991419,"patch":[[{"diffs":[[0,"      }\n"],[-1,"\n\n"],[0,"        "]],"start1":2037,"start2":2037,"length1":18,"length2":16}]],"length":2773,"saved":false}
{"ts":1353036026332,"patch":[[{"diffs":[[0,"rovider;"],[1,"\n    var thatLinkService = this.hotLinkService;"],[0,"\n\n    th"]],"start1":1357,"start2":1357,"length1":16,"length2":63}]],"length":2820,"saved":false}
{"ts":1353036042754,"patch":[[{"diffs":[[0," = this."],[-1,"hotL"],[1,"Hotl"],[0,"inkServi"]],"start1":1389,"start2":1389,"length1":20,"length2":20}]],"length":2820,"saved":false}
{"ts":1353036048922,"patch":[[{"diffs":[[0,"        "],[-1,"ho"],[1,"tha"],[0,"tLinkSer"]],"start1":1813,"start2":1813,"length1":18,"length2":19}]],"length":2821,"saved":false}
{"ts":1353036087794,"patch":[[{"diffs":[[0,"quire('."],[1,"./Document"],[0,"/Documen"]],"start1":236,"start2":236,"length1":16,"length2":26}]],"length":2831,"saved":false}
{"ts":1353036321471,"patch":[[{"diffs":[[0,"ETHODS\n\n"],[1,"function "],[0,"Validate"]],"start1":2175,"start2":2175,"length1":16,"length2":25},{"diffs":[[0,"rmation "],[-1,"= function"],[0,"(loginIn"]],"start1":2209,"start2":2209,"length1":26,"length2":16}]],"length":2830,"saved":false}
{"ts":1353036322386,"patch":[[{"diffs":[[0,"ormation"],[-1," "],[0,"(loginIn"]],"start1":2208,"start2":2208,"length1":17,"length2":16}]],"length":2829,"saved":false}
{"ts":1353036338782,"patch":[[{"diffs":[[0,"nkService;\n\n    "],[-1,"this."],[0,"ValidateLoginInf"]],"start1":860,"start2":860,"length1":37,"length2":32}]],"length":2824,"saved":false}
{"ts":1353036350998,"patch":[[{"diffs":[[0,"der;"],[-1,"\n    var hotLinkService = this.HotlinkService;"],[0,"\n\n  "]],"start1":820,"start2":820,"length1":54,"length2":8}]],"length":2778,"saved":false}
{"ts":1353036429233,"patch":[[{"diffs":[[0,"e;\n\n    "],[-1,"this."],[0,"Validate"]],"start1":1369,"start2":1369,"length1":21,"length2":16}]],"length":2773,"saved":false}
{"ts":1353036665495,"patch":[[{"diffs":[[0,"LoginInformation"],[1," = function"],[0,"(loginInformatio"]],"start1":2159,"start2":2159,"length1":32,"length2":43}]],"length":2799,"saved":false}
{"ts":1353036688354,"patch":[[{"diffs":[[0,"rvice;\n\n    "],[1,"this."],[0,"ValidateLogi"]],"start1":1365,"start2":1365,"length1":24,"length2":29}]],"length":2804,"saved":false}
{"ts":1353036867320,"patch":[[{"diffs":[[0,"         else {\n"],[1,"                        \n                        \n"],[0,"                "]],"start1":1964,"start2":1964,"length1":32,"length2":82}]],"length":2854,"saved":false}
{"ts":1353036879335,"patch":[[{"diffs":[[0,"                "],[1,"var result=[account,linkurls];"],[0,"\n               "]],"start1":1988,"start2":1988,"length1":32,"length2":62}]],"length":2884,"saved":false}
{"ts":1353036887929,"patch":[[{"diffs":[[0,"var "],[-1,"resul"],[1,"fullAccoun"],[0,"t=[a"]],"start1":2004,"start2":2004,"length1":13,"length2":18}]],"length":2889,"saved":false}
{"ts":1353036898219,"patch":[[{"diffs":[[0,"k(null, "],[-1,"linkurls"],[1,"fullAccount"],[0,");\n     "]],"start1":2096,"start2":2096,"length1":24,"length2":27}]],"length":2892,"saved":false}
